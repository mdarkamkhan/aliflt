---
layout: base.liquid

pagination:
  data: collections.services
  size: 1
  alias: item

# ✅ Generate one page per service like /service/<fileSlug>/
permalink: "service/{{ item.fileSlug }}/"

eleventyComputed:
  title: "{{ item.data.title | default: 'Service' }}"
---

<div class="container section">
  <div class="product-detail-grid">

    <div class="product-detail-image">
      {% if item.data.image %}
        <img src="{{ item.data.image | url }}" alt="{{ item.data.title | escape }}">
      {% else %}
        <img src="/icons/icon-512x512.png" alt="Service image">
      {% endif %}
    </div>

    <div class="product-detail-info">
      <h1 class="product-detail-title">{{ item.data.title }}</h1>

      {% if item.data.price %}
        <span class="product-detail-price">₹{{ item.data.price }}</span>
      {% endif %}

      {% if item.data.category %}
        <span class="product-detail-category">{{ item.data.category }}</span>
      {% endif %}

      <div class="product-detail-actions" style="grid-template-columns: 1fr;">
        <button class="btn-buy" id="bookNowBtn"
                data-service-title="{{ item.data.title | escape }}">
          Book Now
        </button>
      </div>
    </div>

  </div>
</div>

<div class="product-accordion-container">

  {% if item.data.service_information %}
  <details class="accordion-item" open>
    <summary class="accordion-summary">
      <h3 class="accordion-heading">Service Information</h3>
      <span class="accordion-caret">^</span>
    </summary>
    <div class="accordion-content">
      <p class="accordion-description-text">{{ item.data.service_information }}</p>
    </div>
  </details>
  {% endif %}

  {% assign current_category = item.data.category %}
  {% if current_category %}
    {% assign related_works = collections.works | where_exp: "work", "work.data.category == current_category" %}
  {% endif %}

  {% if related_works and related_works.size > 0 %}
  <details class="accordion-item" open>
    <summary class="accordion-summary">
      <h3 class="accordion-heading">Our Works</h3>
      <span class="accordion-caret">^</span>
    </summary>
    <div class="accordion-content">
      <div class="works-gallery-container">
        {% for work in related_works %}
        <div class="work-gallery-item">
          <img src="{{ work.data.image | url }}" alt="{{ work.data.title | escape }}">
          <p class="work-gallery-title">{{ work.data.title }}</p>
        </div>
        {% endfor %}
      </div>
    </div>
  </details>
  {% endif %}
</div>
