---
layout: base.liquid
pagination:
  data: collections.products
  size: 1
  alias: item # We call each product 'item'
  
# This is the correct permalink using the 'item' alias
permalink: "products/{{ item.fileSlug }}/"

eleventyComputed:
  # This sets the <title> tag for each page
  title: "{{ item.data.title }}" 
---

<!-- ðŸ’¡ Main product grid is now inside a .container.section -->
<div class="container section">
    
    <div class="product-detail-grid">
        
        <!-- Column 1: Image -->
        <div class="product-detail-image">
            <img src="{{ item.data.image | url }}" alt="{{ item.data.title }}">
        </div>
        
        <!-- Column 2: Info -->
        <div class="product-detail-info">
            <h1 class="product-detail-title">{{ item.data.title }}</h1>
            
            {% if item.data.price %}
                <span class="product-detail-price">â‚¹{{ item.data.price }}</span>
            {% endif %}
            
            {% if item.data.category %}
                <span class="product-detail-category">{{ item.data.category }}</span>
            {% endif %}

            <!-- Static Delivery Promo Text -->
            <div class="product-delivery-promo">
                Free delivery on orders above â‚¹199
            </div>

            <!-- Add to Cart & Buy Now Buttons -->
            <div class="product-detail-actions">
                <button class="btn-cart" id="addToCartBtn" 
                        data-product-id="{{ item.fileSlug }}" 
                        data-title="{{ item.data.title | escape }}" 
                        data-price="{{ item.data.price }}" 
                        data-image="{{ item.data.image | url }}">
                    Add to Cart
                </button>
                <button class="btn-buy" id="buyNowBtn" 
                        data-title="{{ item.data.title | escape }}" 
                        data-price="{{ item.data.price }}" 
                        data-image="{{ item.data.image | url }}">
                    Buy Now
                </button>
            </div>
            
            <!-- ðŸ’¡ The old description and spec sections have been removed from here -->

        </div>
    </div>
</div>

<!-- 
==================================================
===== ðŸ’¡ NEW FULL-WIDTH ACCORDION ================
================================================== 
-->
<div class="product-accordion-container">

    <!-- 1. Description Accordion -->
    {% if item.data.description %}
    <details class="accordion-item" open> <!-- Starts open -->
        <summary class="accordion-summary">
            <h3 class="accordion-heading">Description</h3>
            <span class="accordion-caret">^</span>
        </summary>
        <div class="accordion-content">
            <div> <!-- This inner div is required for the animation -->
                <p class="accordion-description-text">{{ item.data.description }}</p>
            </div>
        </div>
    </details>
    {% endif %}

    <!-- 2. Product Information Accordion -->
    <details class="accordion-item">
        <summary class="accordion-summary">
            <h3 class="accordion-heading">Product Information</h3>
            <span class="accordion-caret">^</span>
        </summary>
        <div class="accordion-content">
            <div>
                <div class="spec-row-wrapper">
                    {% if item.data.size %}
                    <div class="spec-row">
                        <span class="spec-label">Size</span>
                        <span class="spec-value">{{ item.data.size }}</span>
                    </div>
                    {% endif %}
                    
                    {% if item.data.colour %}
                    <div class="spec-row">
                        <span class="spec-label">Colour</span>
                        <span class="spec-value">{{ item.data.colour }}</span>
                    </div>
                    {% endif %}
                    
                    {% if item.data.number_of_pieces %}
                    <div class="spec-row">
                        <span class="spec-label">Number of Pieces/meter</span>
                        <span class="spec-value">{{ item.data.number_of_pieces }}</span>
                    </div>
                    {% endif %}
                    
                    {% if item.data.fabric %}
                    <div class="spec-row">
                        <span class="spec-label">Fabric</span>
                        <span class="spec-value">{{ item.data.fabric }}</span>
                    </div>
                    {% endif %}
                    
                    {% if item.data.work %}
                    <div class="spec-row">
                        <span class="spec-label">Work</span>
                        <span class="spec-value">{{ item.data.work }}</span>
                    </div>
                    {% endif %}
                    
                    {% if item.data.pattern %}
                    <div class="spec-row">
                        <span class="spec-label">Pattern</span>
                        <span class="spec-value">{{ item.data.pattern }}</span>
                    </div>
                    {% endif %}
                    
                    {% if item.data.ideal_for %}
                    <div class="spec-row">
                        <span class="spec-label">Ideal For</span>
                        <span class="spec-value">{{ item.data.ideal_for }}</span>
                    </div>
                    {% endif %}
                </div>
            </div>
        </div>
    </details>

    <!-- 3. Delivery Details Accordion -->
    <details class="accordion-item">
        <summary class="accordion-summary">
            <h3 class="accordion-heading">Delivery Details</h3>
            <span class="accordion-caret">^</span>
        </summary>
        <div class="accordion-content">
            <div>
                <div class="spec-row-wrapper">
                    {% if item.data.delivery_charges %}
                    <div class="spec-row">
                        <span class="spec-label">Delivery Charges</span>
                        <span class="spec-value">{{ item.data.delivery_charges }}</span>
                    </div>
                    {% endif %}
                    
                    {% if item.data.delivery_within %}
                    <div class="spec-row">
                        <span class="spec-label">Delivery within</span>
                        <span class="spec-value">{{ item.data.delivery_within }}</span>
                    </div>
                    {% endif %}
                    
                    {% if item.data.payment_type %}
                    <div class="spec-row">
                        <span class="spec-label">Payment Type</span>
                        <span class="spec-value">{{ item.data.payment_type }}</span>
                    </div>
                    {% endif %}
                    
                    {% if item.data.return_policy %}
                    <div class="spec-row">
                        <span class="spec-label">Return Policy</span>
                        <span class="spec-value">{{ item.data.return_policy }}</span>
                    </div>
                    {% endif %}
                </div>
            </div>
        </div>
    </details>
</div>
