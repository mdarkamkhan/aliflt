---
layout: base.liquid
pagination:
  data: collections.products
  size: 1
  # ðŸ’¡ FIX: Changed alias to 'item' to be safe
  alias: item 

# ðŸ’¡ FIX: Use the 'pagination' variable to build the permalink.
# This is the correct way.
permalink: "products/{{ pagination.items[0].fileSlug }}/"

eleventyComputed:
  # ðŸ’¡ FIX: Use the 'pagination' variable to get the title.
  title: "{{ pagination.items[0].data.title }}"
---

<!-- 
==================================================
===== ðŸ’¡ DEBUG BOX (FIXED) =======================
================================================== 
This will now show up, because the page will build.
It now uses the correct 'item' variable.
-->
<div style="position: fixed; top: 80px; left: 10px; right: 10px; z-index: 99999; background: #ffc; border: 3px solid #f00; color: #000; padding: 15px; font-size: 14px; font-family: monospace; line-height: 1.6;">
    
    <strong>--- DEBUGGER ACTIVE ---</strong><br>
    
    {% if item %}
        Page is rendering. Checking item data...<br>
        ------------------------------------<br>
        <strong>Title:</strong> {{ item.data.title | default: "MISSING" }}<br>
        <strong>Price:</strong> {{ item.data.price | default: "MISSING" }}<br>
        <strong>Image:</strong> {{ item.data.image | default: "MISSING" }}<br>
        <strong>Slug:</strong> {{ item.fileSlug | default: "MISSING" }}<br>
        <strong>URL:</strong> {{ item.url | default: "MISSING" }}<br>
    {% else %}
        <strong>ERROR:</strong> The 'item' variable is empty.
    {% endif %}
    
    <br><strong>--- END DEBUG ---</strong>
</div>


<!-- 
==================================================
===== ðŸ’¡ PAGE CONTENT ============================
================================================== 
This content also now uses the correct 'item' variable.
-->
<div class="container section">
    
    <div class="product-detail-grid">
        
        <!-- Column 1: Image -->
        <div class="product-detail-image">
            <img src="{{ item.data.image | url }}" alt="{{ item.data.title }}">
        </div>
        
        <!-- Column 2: Info -->
        <div class="product-detail-info">
            <h1 class="product-detail-title">{{ item.data.title }}</h1>
            
            {% if item.data.price %}
                <span class="product-detail-price">â‚¹{{ item.data.price }}</span>
            {% endif %}
            
            {% if item.data.category %}
                <span class="product-detail-category">{{ item.data.category }}</span>
            {% endif %}

            <!-- Add to Cart & Buy Now Buttons -->
            <div class="product-detail-actions">
                <button class="btn-cart" id="addToCartBtn" 
                        data-product-id="{{ item.fileSlug }}" 
                        data-title="{{ item.data.title | escape }}" 
                        data-price="{{ item.data.price }}" 
                        data-image="{{ item.data.image | url }}">
                    Add to Cart
                </button>
                <button class="btn-buy" id="buyNowBtn" 
                        data-title="{{ item.data.title | escape }}" 
                        data-price="{{ item.data.price }}" 
                        data-image="{{ item.data.image | url }}">
                    Buy Now
                </button>
            </div>
            
            {% if item.data.description %}
                <div class="product-detail-description">
                    <h3>Description</h3>
                    <p>{{ item.data.description }}</p>
                </div>
            {% endif %}
        </div>
    </div>
</div>


