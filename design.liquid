---
layout: base.liquid

pagination:
  data: collections.designs
  size: 1
  alias: item

# ✅ Generate one page per design like /design/<fileSlug>/
permalink: "design/{{ item.fileSlug }}/"

eleventyComputed:
  title: "{{ item.data.title | default: 'Design' }}"
---

<div class="container section">
  <div class="product-detail-grid">

    <div class="product-detail-image">
      {% if item.data.image %}
        <img src="{{ item.data.image | url }}" alt="{{ item.data.title | escape }}">
      {% else %}
        <img src="/icons/icon-512x512.png" alt="Service image">
      {% endif %}
    </div>

    <div class="product-detail-info">
      <h1 class="product-detail-title">{{ item.data.title }}</h1>

      {% if item.data.price %}
        <span class="product-detail-price">Charges: ₹{{ item.data.price }}</span>
      {% endif %}

      {% if item.data.category %}
        <span class="product-detail-category">Use: {{ item.data.category }}</span>
      {% endif %}

      <div class="product-detail-actions" style="grid-template-columns: 1fr; margin-top: 25px;">
        
        {%- comment -%}
          We use 'capture' to build a clean, multi-line message.
        {%- endcomment -%}
        {%- capture wapp_message -%}
        Hello,
        Could you please apply this design to my dress?
        Thank you.

        ---
        Design: {{ item.data.title | default: 'N/A' }}
        {% if item.data.price %}Charges: ₹{{ item.data.price }}{% endif %}
        {% if item.data.image %}Image: https://aliflt.netlify.app{{ item.data.image | url }}{% endif %}
        {%- endcapture -%}

        {%- comment -%}
          We replace newlines with the WhatsApp code (%0A)
          and then URL-encode the whole thing.
        {%- endcomment -%}
        {%- assign wapp_text = wapp_message | strip | replace: "
", "%0A" -%}

        <a href="https://wa.me/7250470009?text={{ wapp_text | url_encode }}" 
           class="btn-buy" 
           target="_blank">
          Request This Design
        </a>
        
      </div>
    </div>

  </div>
</div>

